<!DOCTYPE html>
<html>
  <head>
	<title>Hipreme Engine</title>
  	<meta charset="utf-8" />
	<style>
		body {
      	background-color: rgb(50, 50, 50);
    	}
		#glcanvas {
			display: block;
			padding-left: 0;
			width: 800px;
			height: 600px;
			padding-right: 0;
			margin-left: auto;
			margin-right: auto;
			image-rendering: crisp-edges;
		}
	</style>
  </head>
  <body>
    <canvas id="glcanvas" width="800" height="600"></canvas>
    <script src="/fs.js"></script>
    <script src="/decoders.js"></script>
    <script src="/webgl.js"></script>
    <script src="/hipreme_engine.js"></script>
    <script src="/webassembly-core.js"></script>
    <script>
	// WebAssembly.instantiateStreaming(fetch('/hipreme_engine.wasm'), importObject)
	WebAssembly.instantiateStreaming(fetch('/hipreme_engine.wasm'), importObject)
		.then(function(obj) {

			const canvas = document.getElementById("glcanvas");
			const scale = window.devicePixelRatio;

			canvas.width = Math.floor(canvas.width * scale);
			canvas.height = Math.floor(canvas.height * scale);
			memory = obj.instance.exports.memory;
			bridge_malloc = obj.instance.exports.bridge_malloc;
			printBlockDebugInfo = obj.instance.exports.printBlockDebugInfo;
			exports = obj.instance.exports;
			obj.instance.exports._start();
		});
    </script>
  </body>
</html>
